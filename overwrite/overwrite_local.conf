[General]
# 建议：对于本覆写脚本，首次订阅时使用 github 文件加速 raw 链接
# 本版本取消了外部 yaml 文件下载，建议直接下载 yaml 然后手动改名上传 /etc/openclash/config/ 或订阅拉取，个人感觉更加稳定好操作
# CORE_TYPE (核心类型 Smart or Meta)
CORE_TYPE = Smart

# --- 控制面板 ---
# DA_PASSWORD (控制面板访问密码)
DA_PASSWORD = hjlzsdsb

# --- 端口相关 ---
# 此部分可不设置，在 yaml 文件中和插件面板中已经定义
# PROXY_PORT (Redir代理端口)
# TPROXY_PORT (TPROXY代理端口)
# HTTP_PORT (HTTP 代理端口)
# SOCKS_PORT (SOCKS 代理端口)
# MIXED_PORT (混合代理端口)
# DNS_PORT (DNS 监听端口)

# --- DNS 相关 ---
# ENABLE_REDIRECT_DNS (DNS 重定向模式，0：禁用，1：Dnsmasq Redirect, 2：Firewall Redirect)
ENABLE_REDIRECT_DNS = 1
# ENABLE_CUSTOM_DNS (自定义 DNS, 0: 插件不覆写, 1: 启用，使用插件内置规则)
# 此处已在 yaml 文件中定义，此处不覆写
ENABLE_CUSTOM_DNS = 0
# APPEND_DEFAULT_DNS (自动追加 default-nameserver DNS, 0: 插件不覆写, 1: 启用)
# 此处是用于解析 dot doh 的，yaml 中已经定义，不需要追加
APPEND_DEFAULT_DNS = 0
# APPEND_WAN_DNS (追加上游分配 DNS, 0: 插件不覆写, 1: 启用)
APPEND_WAN_DNS = 0
# STORE_FAKEIP (启用 fake-ip 缓存, 0: 插件不覆写, 1: 启用)
# 建议开启，增加反应速度，可以在 zashboard 中手动清除 fake-ip 缓存
STORE_FAKEIP = 1
# CUSTOM_FAKEIP_FILTER (启用 Fake-IP-Filter, 0: 插件不覆写, 1: 启用，使用插件内置规则)
# yaml 文件中已经定义
CUSTOM_FAKEIP_FILTER = 0
# CUSTOM_FAKEIP_FILTER_MODE (Fake-IP 过滤模式, blacklist/whitelist)
CUSTOM_FAKEIP_FILTER_MODE = blacklist
# FAKEIP_RANGE (自定义 Fake-IP 地址段, 如 198.18.0.1/16)
FAKEIP_RANGE = 198.18.0.1/16
# ENABLE_RESPECT_RULES (DNS 查询是否遵循规则, 0: 插件不覆写, 1: 启用)
# 不设置 proxy-server-dns 就不需要开启
ENABLE_RESPECT_RULES = 1
# CUSTOM_NAME_POLICY (自定义 Nameserver-Policy, 0: 插件不覆写, 1: 启用，使用插件内置规则)
# 亲测没啥意义，除非特定用途
CUSTOM_NAME_POLICY = 0
# CUSTOM_HOST (自定义 Hosts, 0: 插件不覆写, 1: 启用，使用插件内置规则)
CUSTOM_HOST = 0
# CUSTOM_FALLBACK_FILTER (自定义 Fallback-Filter, 0: 插件不覆写, 1: 启用，使用插件内置规则)
# 最佳设置就不要启用 fallback dns，解析不了的外网域名让代理节点去解析
CUSTOM_FALLBACK_FILTER = 0

# --- IPv6 相关 ---
# 网络不支持就不要用
# IPV6_ENABLE (启用 IPv6，0: 禁用, 1: 启用)
IPV6_ENABLE = 0
# IPV6_DNS (启用 IPv6 DNS，0: 禁用, 1: 启用)
IPV6_DNS = 0
# IPV6_MODE (IPv6 代理模式, 0: TProxy Mode, 1: Redirect Mode, 2: TUN Mode, 3: Mix Mode)
# ENABLE_V6_UDP_PROXY (启用 IPv6 UDP 代理，0: 禁用, 1: 启用, only for Redirect Mode and Redirect Mode)

# --- 代理与模式 ---
# EN_MODE (插件运行模式：fake-ip/fake-ip-tun/fake-ip-mix or redir-host/redir-host-tun/redir-host-mix)
# 首选 fake-ip，即增强模式，除非有网站或者游戏用不了，那就 mix
EN_MODE = fake-ip
# ENABLE_UDP_PROXY (启用 UDP 代理, 0: 禁用, 1: 启用, only for EN_MODE_TUN is nil)
# DISABLE_UDP_QUIC (禁用 UDP QUIC, 0: 启用, 1: 禁用)
DISABLE_UDP_QUIC = 0
# ROUTER_SELF_PROXY (路由器自身代理, 0: 禁用, 1: 启用)
ROUTER_SELF_PROXY = 1
# STACK_TYPE (TUN 网络栈类型, system/gvisor/mixed, default is system)
# PROXY_MODE (代理模式, rule/global/direct, default is rule)
PROXY_MODE = rule

# --- 防火墙与访问控制 ---
# INTRANET_ALLOWED (仅允许内网访问, 0: 禁用, 1: 启用)
INTRANET_ALLOWED = 1
# INTRANET_ALLOWED_WAN_NAME (仅允许内网时 WAN 接口列表名称)
# BYPASS_GATEWAY_COMPATIBLE (旁路网关兼容模式, 0: 禁用, 1: 启用)
BYPASS_GATEWAY_COMPATIBLE = 0
# COMMON_PORTS (绕过常用端口的端口列表, 0: 禁用 or "21 22 23 53 80 123 143 194 443 465 587 853 993 995 998 2052 2053 2082 2083 2086 2095 2096 5222 5228 5229 5230 8080 8443 8880 8888 8889")
COMMON_PORTS = 0

# --- 分流相关 ---
# CHINA_IP_ROUTE (IPv4 绕过 IP 模式, 0: 禁用, 1: 绕过大陆, 2: 回国)
CHINA_IP_ROUTE = 1
# CHINA_IP6_ROUTE (IPv6 绕过 IP 模式, 0: 禁用, 1: 绕过大陆, 2: 回国)
# CHNR_AUTO_UPDATE (大陆IP自动更新, 0: 禁用, 1: 启用)
CHNR_AUTO_UPDATE = 1
# CHNR_UPDATE_WEEK_TIME (大陆IP更新星期, 0-6 or *, 0代表星期天, *代表每天, default 0)
CHNR_UPDATE_WEEK_TIME = *
# CHNR_UPDATE_DAY_TIME (大陆IP更新小时, 0-23 or *, default 1)
CHNR_UPDATE_DAY_TIME = 2
# CHNR_CUSTOM_URL (大陆IP列表自定义更新地址, URL or default)
# CHNR6_CUSTOM_URL (大陆IPv6列表自定义更新地址, URL or default)
# CHINA_IP_ROUTE_PASS (绕过大陆 IP 时排除类别, 域名、IP or 插件内置规则, eg: services.googleapis.cn googleapis.cn 114.114.114.114)
# CHINA_IP6_ROUTE_PASS (绕过大陆 IPv6 时排除类别, 域名、IP or 插件内置规则)

# ENABLE_META_SNIFFER (启用域名嗅探, 0: 插件不覆写, 1: 启用)
ENABLE_META_SNIFFER = 1
# ENABLE_META_SNIFFER_CUSTOM (启用自定义嗅探规则, 0: 插件不覆写, 1: 启用，使用插件内置规则)
ENABLE_META_SNIFFER_CUSTOM = 1
# ENABLE_META_SNIFFER_PURE_IP (强制嗅探纯 IP 连接, 0: 插件不覆写, 1: 启用)
ENABLE_META_SNIFFER_PURE_IP = 1

# ENABLE_TCP_CONCURRENT (启用 TCP 并发, 0: 插件不覆写, 1: 启用)
ENABLE_TCP_CONCURRENT = 1
# FIND_PROCESS_MODE (进程查找模式, 0: 插件不覆写, off: 关闭, always, strict)
FIND_PROCESS_MODE = 0
# GLOBAL_CLIENT_FINGERPRINT (全局客户端指纹, none/random/chrome/firefox/safari/ios/android/edge/360/qq/0: 插件不覆写)
GLOBAL_CLIENT_FINGERPRINT = 0
# ENABLE_UNIFIED_DELAY (启用统一延迟计算, 0: 插件不覆写, 1: 启用)
ENABLE_UNIFIED_DELAY = 1

# --- 插件自带规则 ---
# 这里我们都不要用，用 yaml 中的规则足够了
# ENABLE_RULE_PROXY (仅代理命中规则流量, 0: 禁用, 1: 启用)
# 这里指的是 BT/PT 流量，启用则添加 BT/PT 直连规则
ENABLE_RULE_PROXY = 0
# ENABLE_CUSTOM_CLASH_RULES (启用用户自定义规则, 0: 禁用, 1: 启用，使用插件规则)
ENABLE_CUSTOM_CLASH_RULES = 0

# yaml 中每个代理组都有对应的设置，不用管
# TOLERANCE (URL-Test 策略组切换灵敏度, 毫秒数 or default 0 不覆写)
# URLTEST_INTERVAL_MOD (测速（连通性）间隔修改, 秒数 or default 0 不覆写)
# URLTEST_ADDRESS_MOD (测速（连通性）地址修改, URL or default 0 不覆写)
# GITHUB_ADDRESS_MOD (GitHub 地址修改, URL or default 0 不覆写)

# --- Smart 相关 ---
# 切记，model.bin 文件的下载通常是失败的，后续多半需要手动下载或者能代理下载
# smart 组很可能失败，所以一定要有设置有非 smart 组
# AUTO_SMART_SWITCH (启用 Smart 自动切换, 0: 插件不覆写, 1: 启用)
AUTO_SMART_SWITCH = 0
# SMART_STRATEGY (初始数据收集策略, sticky-sessions or round-robin or default sticky-sessions)
SMART_STRATEGY = sticky-sessions
# SMART_ENABLE_LGBM (启用 LightGBM 模型, 0: 插件不覆写, 1: 启用)
SMART_ENABLE_LGBM = 0
# SMART_POLICY_PRIORITY (节点权重加成, 正则或字符，格式：Premium:0.9;SG:1.3)
# SMART_COLLECT (模型训练数据收集, 0: 插件不覆写, 1: 启用)
# SMART_COLLECT_SIZE (模型训练数据收集的文件大小, MB, 数值 or default 100)
# SMART_COLLECT_RATE (模型训练数据收集的采样率, 0-1 or default 1)
# LGBM_AUTO_UPDATE (LGBM 模型自动更新, 0: 插件不覆写, 1: 启用)
LGBM_AUTO_UPDATE = 1
# LGBM_UPDATE_INTERVAL (LGBM 模型更新间隔, 小时数 or default 72)
LGBM_UPDATE_INTERVAL = 144
# LGBM_CUSTOM_URL (LGBM 模型自定义下载 URL (URL 地址 or default)
# 这里自己选择不同大小模型修改
LGBM_CUSTOM_URL = https://github.com/vernesong/mihomo/releases/download/LightGBM-Model/Model-large.bin

# --- 数据库加载相关 ---
# ENABLE_GEOIP_DAT (启用 GEOIP DAT 数据库, 0: 插件不覆写, 1: 启用)
ENABLE_GEOIP_DAT = 1
# GEODATA_LOADER (Geo 数据加载模式, memconservative/standard/0: 插件不覆写)
GEODATA_LOADER = 0
# GEO_AUTO_UPDATE (GeoIP MMDB 数据自动更新, 0: 禁用, 1: 启用)
GEO_AUTO_UPDATE = 1
# GEO_UPDATE_WEEK_TIME (GeoIP MMDB 数据更新日, 0-6 or *, 0代表星期天, *代表每天, default 0)
GEO_UPDATE_WEEK_TIME = *
# GEO_UPDATE_DAY_TIME (GeoIP MMDB 数据更新小时, 0-23 or *, default 1)
GEO_UPDATE_DAY_TIME = 3
# GEO_CUSTOM_URL (GeoIP MMDB 数据自定义更新地址, URL or default)
# GEOIP_AUTO_UPDATE (GeoIP Dat 数据自动更新, 0: 禁用, 1: 启用)
GEOIP_AUTO_UPDATE = 1
# GEOIP_UPDATE_WEEK_TIME (GeoIP Dat 数据更新日, 0-6 or *, 0代表星期天, *代表每天, default 0)
GEOIP_UPDATE_WEEK_TIME = *
# GEOIP_UPDATE_DAY_TIME (GeoIP Dat 数据更新小时, 0-23 or *, default 1)
GEOIP_UPDATE_DAY_TIME = 4
# GEOIP_CUSTOM_URL (GeoIP Dat 数据自定义更新地址, URL or default)
# GEOSITE_AUTO_UPDATE (GeoSite 数据自动更新, 0: 禁用, 1: 启用)
GEOSITE_AUTO_UPDATE = 1
# GEOSITE_UPDATE_WEEK_TIME (GeoSite 数据更新日, 0-6 or *, 0代表星期天, *代表每天, default 0)
GEOSITE_UPDATE_WEEK_TIME = *
# GEOSITE_UPDATE_DAY_TIME (GeoSite 数据更新小时, 0-23 or *, default 1)
GEOSITE_UPDATE_DAY_TIME = 5
# GEOSITE_CUSTOM_URL (GeoSite 数据自定义更新地址, URL or default)
# GEOASN_AUTO_UPDATE (GeoASN 数据自动更新, 0: 禁用, 1: 启用)
GEOASN_AUTO_UPDATE = 1
# GEOASN_UPDATE_WEEK_TIME (GeoASN 数据更新日, 0-6 or *, 0代表星期天, *代表每天, default 0)
GEOASN_UPDATE_WEEK_TIME = *
# GEOASN_UPDATE_DAY_TIME (GeoASN 数据更新小时, 0-23 or *, default 1)
GEOASN_UPDATE_DAY_TIME = 6
# GEOASN_CUSTOM_URL (GeoASN 数据自定义更新地址, URL or default)

# --- 其它功能 ---
# SMALL_FLASH_MEMORY (小闪存模式, 0: 禁用, 1: 启用)
SMALL_FLASH_MEMORY = 0
# DISABLE_QUIC_GO_GSO (禁用 QUIC GO GSO, 0: 插件不覆写, 1: 启用)
DISABLE_QUIC_GO_GSO = 0
# DELAY_START (延时启动, 0: 禁用 or 秒数)
DELAY_START = 0
# SKIP_PROXY_ADDRESS (跳过代理地址, 0: 禁用, 1: 启用)
SKIP_PROXY_ADDRESS = 1
# RESTART (模块更新后重启插件, true: 启用, false: 禁用)
RESTART = true
# SUB_INFO_URL (订阅信息 URL，展示用)

# --- 远程订阅，按需要修改 ---
# 首次订阅时使用 github 文件加速 raw 链接
# 建议手动给文件链接添加 github 加速，不然很容易卡下载了
# DOWNLOAD_FILE (下载外部文件到指定路径, need URL and path)
#force: true 代表强制下载，false 代表不强制下载（当文件不存在时会自动下载）
#ua: 下载时使用的User-Agent，默认不设置
#cron: 定时下载时间，格式为标准的 cron 表达式，0 代表不启用定时下载
#示例：每天凌晨6点下载一次
#cron=0 6 * * *
#示例：每周一凌晨6点下载一次
#cron=0 6 * * 1
# DOWNLOAD_FILE = url=https://raw.githubusercontent.com/Snake-badass/Nettech/refs/heads/main/conf/smart_noipv6_overwrite.yaml, path=/etc/openclash/config/smart_noipv6_overwrite.yaml, cron=0 7 * * 6, force=true
# CONFIG_FILE (原始配置文件路径)
CONFIG_FILE = /etc/openclash/config/smart_noipv6_overwrite.yaml

[Overwrite]
# EN_KEY 需要在 openclash 覆写模块 -> 环境变量 中手动填入，并契合对应的yaml文件
# 举例格式：EN_KEY1=https://xxx;EN_KEY2=https://yyy
ruby_map_edit "$CONFIG_FILE" "['proxy-providers']" "WD" "['url']" "$EN_KEY3"
ruby_map_edit "$CONFIG_FILE" "['proxy-providers']" "NB" "['url']" "$EN_KEY2"
ruby_map_edit "$CONFIG_FILE" "['proxy-providers']" "WM" "['url']" "$EN_KEY1"
ruby_map_edit "$CONFIG_FILE" "['proxy-providers']" "XZY" "['url']" "$EN_KEY4"
